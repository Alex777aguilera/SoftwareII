 {% extends "base_cliente.html" %}
{% block title %}
Easy-buy | Cliente
{% endblock title %}
{% load static %}
{% block content %}


 <div class="container">
        <!-- ========================= SECTION MAIN  ========================= -->
        <section class="section-main padding-y">
            <main class="card">
                <div class="card-body">
                    <div class="row">
                        <aside class="col-lg col-md-3 flex-lg-grow-0">
                            <h6>Productos en descuento</h6>
                            <nav class="nav-home-aside">
                                <ul class="menu-category">
                                    {% for producto in ctx_productos_descuento %}
                                        <li><a href="{% url 'ecommerce_app:detalle_producto' producto.pk %}">{{producto.nombre_producto}}</a></li>
                                     {% empty %}
                                    <h1><strong>No hay productos en descuento</strong></h1>
                                    {% endfor %}
                                </ul>
                            </nav>
                        </aside> <!-- col.// -->
                        <div class="col-md-9 col-xl-7 col-lg-7">
                            <!-- ================== COMPONENT SLIDER  BOOTSTRAP  ==================  -->
                            <div id="carousel1_indicator" class="slider-home-banner carousel slide" data-ride="carousel">
                                <ol class="carousel-indicators">
                                    <li data-target="#carousel1_indicator" data-slide-to="0" class="active"></li>
                                    <li data-target="#carousel1_indicator" data-slide-to="1"></li>
                                    <li data-target="#carousel1_indicator" data-slide-to="2"></li>
                                </ol>
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <img src="{% static 'images/banners/slide1.jpg' %}" alt="First slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="{% static "images/banners/slide2.jpg" %}" alt="Second slide">
                                    </div>
                                    <div class="carousel-item">
                                        <img src="{% static "images/banners/slide3.jpg" %}" alt="Third slide">
                                    </div>
                                </div>
                                <a class="carousel-control-prev" href="#carousel1_indicator" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#carousel1_indicator" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                            <!-- ==================  COMPONENT SLIDER BOOTSTRAP end.// ==================  .// -->
                        </div> <!-- col.// -->
                        <div class="col-md d-none d-lg-block flex-grow-1">
                            <aside class="special-home-right">
                                <h6 class="bg-blue text-center text-white mb-0 p-2">Categorías Populares</h6>
                                <div class="card-banner border-bottom">
                                    <div class="py-3" style="width:80%">
                                        <h6 class="card-title">Artículos Navideños</h6>
                                        <a href="#" class="btn btn-secondary btn-sm"> Visualizar </a>
                                    </div>
                                    <img src="{% static "images/items/1.jpg" %}" height="80" class="img-bg">
                                </div>
                                <div class="card-banner border-bottom">
                                    <div class="py-3" style="width:80%">
                                        <h6 class="card-title">Ropa </h6>
                                        <a href="#" class="btn btn-secondary btn-sm"> Visualizar </a>
                                    </div>
                                    <img src="{% static "images/items/2.jpg" %}" height="80" class="img-bg">
                                </div>
                                <div class="card-banner border-bottom">
                                    <div class="py-3" style="width:80%">
                                        <h6 class="card-title">Hogar</h6>
                                        <a href="#" class="btn btn-secondary btn-sm"> Visualizar </a>
                                    </div>
                                    <img src="{% static "images/items/6.jpg" %}" height="80" class="img-bg">
                                </div>
                            </aside>
                        </div> <!-- col.// -->
                    </div> <!-- row.// -->
                </div> <!-- card-body.// -->
            </main> <!-- card.// -->
        </section>
        <!-- ========================= SECTION MAIN END// ========================= -->
        <!-- =============== SECTION 1 =============== -->
        <section class="padding-bottom">
            <header class="section-heading heading-line">
                <h4 class="title-section text-uppercase">Productos agregados recientemente</h4>
            </header>
    
    <div class="row">
    {% for producto in productos_recientes  %}
        <div class="col-md-3">
            <div href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="card card-product-grid rounded-lg">
                <a href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="img-wrap"><img src="{{producto.imagen_producto.url}}"></a>
                <figcaption class="info-wrap">
                    <a href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="title">{{producto.nombre_producto}}</a>
                    <div class="rating-wrap">
                        {% if producto.nuevo_producto %}
                            <span class="label-rating text-muted">Nuevo</span>
                        {% else %}
                            <span class="label-rating text-muted">Usado</span>
                        {% endif %}

                    </div>
                    <div class="price mt-1">L. {{producto.precio}}</div> <!-- price-wrap.// -->
                </figcaption>
            </div>
        </div> <!-- col.// -->
        {% empty %}
        <h1><strong>Lo sentimos, no hay productos agregados.</strong></h1>
    {% endfor %}
    </div>
        </section>
        <!-- =============== SECTION 1 END =============== -->
        <!-- =============== SECTION 2 =============== -->
        <section class="padding-bottom">
            <header class="section-heading heading-line">
                <h4 class="title-section text-uppercase">Para ellas</h4>
            </header>
            <div class="card card-home-category">
                <div class="row no-gutters">
                    <div class="col-md-3">
                        <div class="home-category-banner bg-light-orange">
                            <h5 class="title">Lo mejor en productos femeninos</h5>
                            <p>Aqui es cualquier cosa. </p>
                            <a href="#" class="btn btn-outline-primary rounded-pill">Ver más</a>
                            <img src="{% static "images/woman.png" %}" class="img-bg">
                        </div>
                    </div> <!-- col.// -->
                    <div class="col-md-9">
                        <ul class="row no-gutters bordered-cols">
                            {% for producto in productos_femeninos %}
                            <li class="col-6 col-lg-3 col-md-4">
                                <a  href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="item">
                                    <div class="card-body">
                                        <h6 class="title">{{producto.nombre_producto}}</h6>
                                        <img class="img-sm float-right" src="{{producto.imagen_producto.url}}">
                                        <p class="text-muted"></i>{{producto.descripcion_producto}}</p>
                                    </div>
                                </a>
                            </li>
                            {% empty %}
                            <h1><strong>Lo sentimos, no hay productos agregados</strong></h1>
                          {% endfor %}
                        </ul>
                    </div> <!-- col.// -->
                </div> <!-- row.// -->
            </div> <!-- card.// -->
        </section>
        <!-- =============== SECTION 2 END =============== -->
        <!-- =============== SECTION ITEMS =============== -->
        <section class="padding-bottom-sm">
            <header class="section-heading heading-line">
                <h4 class="title-section text-uppercase">Para caballeros</h4>
            </header>
            <div class="row row-sm">
                {% for  producto in productos_masculinos %}
                <div class="col-xl-2 col-lg-3 col-md-4 col-6">
                    <div  href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="card card-sm card-product-grid">
                        <a  href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="img-wrap"> <img src="{{producto.imagen_producto.url}}"> </a>
                        <figcaption class="info-wrap">
                            <a  href="{% url 'ecommerce_app:detalle_producto' producto.pk %}" class="title">{{producto.nombre_producto}}</a>
                            <div class="price mt-1">{{producto.precio}}</div> <!-- price-wrap.// -->
                        </figcaption>
                    </div>
                </div> <!-- col.// -->
                {% empty %}
                <h1><strong>Lo sentimos, no hay productos agregados</strong></h1>
                {% endfor %}
            </div> <!-- row.// -->
        </section>
        <!-- =============== SECTION ITEMS .//END =============== -->
        <!-- =============== SECTION REGION =============== -->
        <section class="padding-bottom">
            <header class="section-heading heading-line">
                
            </header>
            
        </section>

        <!-- =============== SECTION REGION .//END =============== -->
        <article class="my-4">
            <img src="{% static "images/banners/ad-sm.png" %}" class="w-100">
        </article>
        <hr>
        <article class="my-4">
            <!---- Aqui va el mapa  ---->
            <div id="map" style="width:100%; height:400px;">
            </div>
            </article>
        <hr>
    </div>
    <!-- container end.// -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkB74u5S1EUA3JsHkTlV5L7lB0GD-dO-E&callback=initMap"
  type="text/javascript"></script>
{% endblock content %}

{% block js %}
<script type="text/javascript">
    $(document).ready( function () {
    $('#table_id').DataTable();
});
     var lat = "{{empresas.latitude_empresa}}"
     var lng = "{{empresas.longitude_empresa}}" 
     //var image = "{{empresas.imagen_logo.url}}" este funciona
   
      function initMap() {
          const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 17,
            center: { lat: 13.3090129, lng: -87.1893522 },
          });

       /* var icon = {
            url: '{% static "images/logo_market.png" %}', // url
            scaledSize: new google.maps.Size(40, 70), // scaled size
            origin: new google.maps.Point(0,0), // origin
            anchor: new google.maps.Point(0, 0) // anchor
        };  */

          map.setOptions({draggable: false});
          new google.maps.Marker({
            position: map.getCenter(),
            animation: google.maps.Animation.DROP,
            draggable: false,
            map: map,
            //icon: icon,
          });
        }

</script>
{% endblock js %}
