 {% extends "base_admin.html" %}
 {% block title %}
Easy-buy | Admin
 {% endblock title %}
 {% load static %}
 {% block content %}
 <br>
 <div class="container">
 <section class="content">
 <!-- Formulario de Registro -->
	<div class="card shadow mb-4">
		<aside>
			<!-- ============================ COMPONENT PROFILE  ================================= -->
			<div class="card mb-4">
				<div class="card-header py-3">
					<h5 class="m-0 font-weight-bold text-primary">Registrar Categoría Producto</h5>
				</div>

				<div class="card-body">
					<form role="form" method="post" enctype="multipart/form-data" action="{% url 'ecommerce_app:agregar_categoria' %}" >

						{% csrf_token %}

						{% if errores.administrador %}
						<div class="alert alert-danger alert-dismissible " role="alert">
							<strong>ERROR! </strong>{{errores.administrador}}
						{% endif %}
						</div>

					<div class="form-row">
						<div class="col-md-4">
							<div class="col form-group">
								<label>Categoría Producto:</label>
								<input type="text" class="form-control" id="id_descripcion_categoria" name="descripcion_categoria" placeholder="Descripción Categoría" value="{{ret_data.descripcion_categoria}}">

								{% if errores.descripcion_categoria %}
								<div class="alert alert-danger alert-dismissible " role="alert">
									<strong>ERROR! </strong>{{errores.descripcion_categoria}}
								</div>
								{% endif %}
							</div> <!-- form-group end.// -->
						</div>
					</div>
					
				    <div class="col-sm-4 form-group" style="margin-left: auto; margin-right: auto;">
				        <button type="submit" class="btn btn-primary btn-block"> Guardar  </button>
				    </div>	
					</form>
				</div> <!-- card-body.// -->
			</div> <!-- card .// -->
			<!-- ============================ COMPONENT PROFILE END.// ================================= -->
		</aside>
	
	<!-- Tabla de registros -->
	<div class="card shadow mb-4">
		<div class="card-header py-3">
			<h5 class="m-0 font-weight-bold text-primary">Registros Categoría</h5>
		</div>
		<article class="card-body">
		<div class="table-responsive">
			<table  class="table table-striped table-bordered" id="tablaC"  width="100%" cellspacing="50%">
				<thead>
					<tr>
						<th>Categoría</th>
						<th>Detalles</th>
					</tr>
				</thead>
				<tbody>
					<tr>
					{% for categoria in categorias %}
						<td>{{categoria.descripcion_categoria}}</td>
						<td><button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#id_categoria{{categoria.pk}}">
		                Ver/Editar 
					</tr>
					<!-- Inicio Modal para editar datos-->
					<div class="modal fade" id="id_categoria{{categoria.pk}}">
					  <div class="modal-dialog">
					    <div class="modal-content">

					      <!-- Modal Header -->
					      <div class="modal-header">
					        <h4 class="modal-title">Categoría: {{categoria.descripcion_categoria}}</h4>
					        <button type="button" class="close" data-dismiss="modal">&times;</button>
					      </div>

					      <!-- Modal body -->
					      <div class="modal-body">
					        <form action="{% url 'ecommerce_app:modificar_categoria' categoria.pk %}" method="POST">
			        			{% csrf_token %}
				        		<div class="form-row">
									<div class="col-sm-12 form-group">
										<label>Descripción Categoría:</label>
									  	<input type="text" class="form-control" id="id_descripcion_categoria" name="descripcion_categoria" value="{{categoria.descripcion_categoria}}">
									</div> <!-- form-group end.// -->
								</div> <!-- form-row end.// -->
				        		 <!-- Modal footer -->
				        	    <div class="modal-footer">
						        <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
		 						<button type="submit" class="btn btn-secondary">Guardar</button>
						      </div>
					        </form>
					      </div>
					    </div><!-- Final Modal content -->
					  </div><!-- Final Modal dialog -->
					</div><!-- Final Modal -->
					{% endfor %}
				</tbody>
			</table>
		</div>
		</article>
	</div>
	</div>

	
</section>
</div>
{% endblock content %}

{% block js %}
<script type="text/javascript">
$(document).ready(function() {
    $('#tablaC').DataTable();
});
</script>
{% endblock js %}